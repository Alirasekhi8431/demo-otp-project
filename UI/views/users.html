<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Users</title>
  <link rel="stylesheet" href="/static/users.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header">
        <h1>Users</h1>
        <div class="controls">
          <span class="pill">Total: {{.TotalItems}}</span>
          <span class="pill">Page {{.CurrentPage}} / {{.TotalPages}}</span>
          <span class="pill">Page size: {{.PageSize}}</span>
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Username</th>
            <th>Registration Date</th>
          </tr>
        </thead>
        <tbody>
        {{- $startIndex := (mul (sub .CurrentPage 1) .PageSize) -}}
        {{- range $i, $u := .Users }}
          <tr>
            <td>{{ add $startIndex (add $i 1) }}</td>
            <td>{{ $u.Username }}</td>
            <td>{{ $u.RegistrationDate }}</td>
          </tr>
        {{- end }}
        </tbody>
      </table>

      <nav class="pagination">
        {{ if .HasPrev }}
          <a href="/users?page=1">« First</a>
          <a href="/users?page={{.PrevPage}}">‹ Prev</a>
        {{ else }}
          <span class="muted">« First</span>
          <span class="muted">‹ Prev</span>
        {{ end }}

        {{ range .Pages }}
          {{ if eq . $.CurrentPage }}
            <span class="active">{{ . }}</span>
          {{ else }}
            <a href="/users?page={{ . }}">{{ . }}</a>
          {{ end }}
        {{ end }}

        {{ if .HasNext }}
          <a href="/users?page={{.NextPage}}">Next ›</a>
          <a href="/users?page={{.TotalPages}}">Last »</a>
        {{ else }}
          <span class="muted">Next ›</span>
          <span class="muted">Last »</span>
        {{ end }}
      </nav>
    </div>
  </div>
</body>
</html>
